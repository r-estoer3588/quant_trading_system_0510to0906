# 【対話で学ぶ】GitHub Copilot Chat の隠れた便利機能 10 選

**副題**: テスト・リファクタ・執筆を爆速化する AI 相棒の使いこなし術

> 公開日: 2025-10-18 18:00 / 最終更新: 2025-10-15  
> シリーズ: 対話で学ぶ Copilot 活用術 (Week 1 / 4)

---

## 導入

前回の「Playwright × AI で E2E テスト自動化」の記事では、AI を使ったテスト環境の構築方法をお伝えしました。

「テスト自動化は分かったけど、日常の開発作業で Copilot をもっと活用したい」という声をいただいたので、今回は **GitHub Copilot Chat の実践的な使いこなし術**を対話形式でご紹介します。

コード補完だけじゃない、レビュー・デバッグ・執筆まで爆速化する 10 の裏技を、開発経験 1 年のユイと AI 活用のベテラン・レン先輩の会話を通じて学んでいきましょう！

---

## 登場人物紹介

この記事では、開発経験 1 年の「**ユイ**」と、AI 活用のベテラン「**レン先輩**」の対話を通じて、GitHub Copilot Chat の隠れた便利機能を物語形式で分かりやすく解説します。

> 💡 **このシリーズの特徴**  
> 技術書のような堅苦しい説明ではなく、「会話」で学びます。実際の開発現場でのやり取りをイメージしながら読み進めてください。

---

## 機能 1: 読みやすい Diff 解説（修正理由の要約）

### 複雑な PR レビューを 3 行で理解する

ユイ: レン先輩、今日 PR のレビュー依頼が来たんですけど、変更差分が 300 行以上あって…何が本質的な変更なのか全然分かりません。

レン: それはよくあるよね。リファクタとか、フォーマッタが動いた PR は特に差分が膨大になる。そういうときは、Copilot Chat に Diff を貼って「この変更の要点を 3 行で要約して」って頼むといいよ。

ユイ: え、Diff をそのまま貼るだけでいいんですか？

レン: うん。GitHub の PR ページで「Files changed」タブを開いて、差分をコピペするだけ。Copilot がノイズ（インデント調整とか import の追加）と本質的な変更を分けて説明してくれる。

ユイ: やってみます！…あ、本当だ！「税率計算のロジック追加」「境界値テスト追加」「フォーマット調整（機能変更なし）」って整理されました！

レン: そう！これでレビューするべきポイントが明確になるよね。「この変更前後でテストが壊れる可能性ある？」って追加質問すると、さらにレビューの精度が上がるよ。

---

**📝 実際のプロンプト例**

```
以下の Diff の変更を 3 行で要約してください。
特に本質的な変更(ロジック・API・テストの追加/修正)に注目してください。

（※ ここに GitHub の PR ページから差分をコピー&ペーストします）
```

**🤖 Copilot の回答例**

```
1. `calculateTotal` 関数に消費税 10% の計算ロジックを追加
2. テストケースに境界値（0 円・負の値）のテストを追加
3. インデント調整と import 文の整理（機能的な変更なし）
```

> 💡 **ひとこと Tips**  
> 複雑なリファクタ PR では、「この変更前後でテストが壊れる可能性ある？」と追加質問すると、レビューポイントを絞り込めます。セキュリティ修正の場合は「この変更で脆弱性リスクは？」と聞くのも効果的です。

---

## 機能 2: テストコード生成の叩き台（前提条件を明文化）

### 「曖昧な依頼」から「精密なテスト」へ

ユイ: 先輩、Copilot に「この関数のテストを書いて」って頼んだら、モックだらけの複雑なテストが出てきて逆に困りました…。

レン: あー、それは前提条件を明記してないから、Copilot が「念のため汎用的なテスト」を作っちゃったんだよね。「Jest で、モック不要、境界値含めて 5 パターン」みたいに条件を絞ると、グッと精度が上がるよ。

ユイ: 具体的にどう聞けばいいんですか？

レン: こんな感じで条件を並べてみよう。

---

**❌ 曖昧な依頼**

```
この関数のテストを書いて
```

→ 結果: 不要なモック、過剰なテストケース、意図不明のアサーションが生成される

---

**⭕ 明確な依頼**

```
以下の関数のテストを書いてください。

【条件】
- テストフレームワーク: Jest
- モック: 不要（純粋関数のため）
- カバー範囲: 正常系・境界値（0, 負の値）・エラーハンドリング
- アサーション: toEqual を使用
- テストの意図をコメントで説明

（※ ここに対象の関数のコードをコピー&ペーストします）
```

→ 結果: シンプルで読みやすい、実用的なテストコードが生成される

---

ユイ: わあ、今度はすごくシンプルなテストが出てきました！「正常系: 税込価格の計算」とかコメントも付いてる！

レン: そうそう。Copilot は「どんなテストが欲しいか」を明示すると、それに合わせた精度の高いコードを生成してくれる。逆に曖昧だと、「念のため全部」になっちゃうんだよね。

ユイ: 「テストの意図をコメントで説明して」って追加すると、後から読んでも分かりやすいですね。

レン: まさに！テストは「なぜこのテストが必要か」が分からないと、後でメンテできなくなるから、コメント付きは実務でも重宝するよ。

> 💡 **ひとこと Tips**  
> 「エッジケース（edge case）も含めて」と追加すると、うるう年・タイムゾーン・NULL 値など、見落としがちな境界値テストも生成してくれます。

---

## 機能 3: エラーログ要約 + 再現ステップ抽出

### 長大なスタックトレースを 5 行で理解

ユイ: うう…CI でテストが落ちたんですけど、ログが 500 行以上あって…どこから読めばいいか分かりません。

レン: スタックトレース読むの、最初は誰でも苦手だよね。そういうときは Copilot Chat にログを貼って「エラーの原因と再現ステップを箇条書きで」って頼むと一発だよ。

ユイ: え、ログ全部貼っていいんですか？長すぎて怒られませんか？

レン: 大丈夫、Copilot はノイズ（info ログや debug ログ）を自動で除外して、本質的なエラー部分だけ抽出してくれるから。まずは全部貼って試してみよう。

---

**📝 実際のプロンプト例**

```
以下のエラーログから、原因と再現ステップを箇条書きで抽出してください。
修正案があれば併せて提示してください。

（※ ここに CI のエラーログ全体をコピー&ペーストします）
```

---

**🤖 Copilot の回答例**

```
【エラーの原因】
- `getByTestId('submit-btn')` のセレクタが見つからない
- 原因: ボタンの data-testid 属性が `submit-button` に変更されている（PR #123 で修正）

【再現ステップ】
1. ログインページにアクセス
2. フォームにメールアドレスとパスワードを入力
3. 送信ボタンをクリック → TimeoutError 発生（5000ms で待機タイムアウト）

【修正案】
test/login.spec.ts の 15 行目を以下に修正：
`await page.getByTestId('submit-button').click();`
```

---

ユイ: すごい！500 行のログが 10 行でまとまりました！しかも修正案まで出てくるんですね。

レン: そうそう。エラーの「原因」と「再現ステップ」が分かれば、あとは修正するだけ。「このエラーの優先度は？（高/中/低）」って追加質問すると、どのエラーから潰すべきか判断しやすいよ。

ユイ: 試してみます！…「優先度: 高（全ユーザーに影響）」って出ました！これは急いで直さないと。

レン: いいね！エラーログ分析が速くなると、CI の失敗対応がグッと楽になるよ。

> 💡 **ひとこと Tips**  
> 「このエラーの優先度は？（高/中/低）」と追加質問すると、どのエラーから潰すべきか判断しやすくなります。また、「過去に似たエラーはあった？」と聞くと、既知の問題かどうかの手がかりが得られます。

---

## 機能 4: セレクタ改善アドバイス（role/testid 優先）

### 壊れないセレクタで安定テストを実現

ユイ: 先輩、Playwright のセレクタを class 名で指定してたら、デザイン変更のたびに CI が壊れて大変でした…。

レン: あー、それはよくあるミスだね。class 名やテキストは変更に弱いから、本番環境では避けた方がいい。Copilot Chat にコードを貼って「セレクタを改善して」って頼むと、`getByRole` や `getByTestId` を提案してくれるよ。

ユイ: どっちを使えばいいんですか？

レン: まずは `getByRole` を優先してみよう。アクセシビリティにも配慮できるし、HTML の意味構造に沿ったセレクタだから壊れにくい。ただし、複数の同じ role がある場合は `getByTestId` で明確に指定する感じだね。

---

**📝 実際のプロンプト例**

```
以下の Playwright コードのセレクタを改善してください。
- class 名やテキストベースのセレクタは避ける
- getByRole または getByTestId を優先
- アクセシビリティを考慮

（※ ここに改善したい Playwright のテストコードをコピー&ペーストします）
```

---

**❌ 改善前（壊れやすいセレクタ）**

```javascript
// class名に依存 → デザイン変更で壊れる
await page.locator(".btn-primary").click();

// テキストに依存 → 多言語対応で壊れる
await page.locator("text=送信").click();
```

---

**⭕ 改善後（安定したセレクタ）**

```javascript
// role指定 → アクセシビリティ◎、壊れにくい
await page.getByRole("button", { name: "送信" }).click();

// testid指定 → 明確、テスト専用属性で安全
await page.getByTestId("submit-btn").click();
```

---

ユイ: すごい！`getByRole` を使うと、スクリーンリーダーでの読み上げも改善されるんですね。

レン: そうそう！テストの安定性とアクセシビリティが同時に向上するから一石二鳥だよ。「このページのアクセシビリティを改善するセレクタを提案して」って追加質問すると、WAI-ARIA 対応の role 指定も学べるよ。

> 💡 **ひとこと Tips**  
> 「このページのアクセシビリティを改善するセレクタを提案して」と追加質問すると、WAI-ARIA 対応の role 指定を学べます。また、「複数の同じ role がある場合の対処法は？」と聞くと、`name` や `level` での絞り込み方法も分かります。

---

## 機能 5: 待機戦略の提案（固定 sleep から条件待ちへ）

### タイムアウト地獄から脱出する賢い待機

ユイ: うーん、Playwright で「要素が見つかりません」エラーが頻発します…待機時間を増やせば解決しますかね？

レン: 単純に `await page.waitForTimeout(5000)` とかで固定待機すると、テストが遅くなる上に、それでも落ちるときがあるんだよね。Copilot Chat に「この操作の適切な待機戦略を教えて」って頼むと、状況に応じた `waitForSelector` の使い分けを提案してくれるよ。

ユイ: 固定待機がダメなんですか！？

レン: ダメじゃないけど、最終手段だね。まずは「条件待ち」を試すべき。たとえば API 通信後に表示される要素なら、「要素が visible になるまで待つ」って指定した方が速くて安定する。

---

（以下、元記事と同一。省略）

---

### 🏷️ Tags (note 用表示)

`#GitHubCopilot` `#CopilotChat` `#AI支援開発` `#Playwright` `#テスト自動化` `#開発効率化` `#リファクタリング` `#ログ解析`

（内部メタのタグと揃え、検索性向上用に英字連結スタイルを採用）
